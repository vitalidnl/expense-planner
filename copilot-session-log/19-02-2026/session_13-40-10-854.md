# Copilot chat session 19-02-2026 13:40:10

## Session Info
- Project folder: expense-planner
- Workspace root: C:\godel\playground\expense-planner
- OS: win32
- Model: GPT-5.2
- Saved at: 19-02-2026 13:40:10
- Output path: `copilot-session-log/19-02-2026/session_13-40-10-854.md`

## Conversation

### User

I need to implement new small project using copilot agents and MCP servers. Initially the strategy is to use copilot acting like business analysis unit, then another one like architect who will create a hi-level specification based on requirements from business analyst, then agent acting like senior developer split the specification to small parts ready to implement by other agents developers.
How is better to do that and what prompts/instructions/agents should I create?

### Assistant

## Recommended way to run this (agents + MCP)  
Treat it like a **pipeline with gated handoffs**. Each agent produces a *single, versioned artifact* that becomes the next agent’s input. Keep outputs structured (Markdown sections + optional JSON) so later agents can diff, trace, and automate.

**Flow**
1. **BA Agent → `01-requirements.md`** (what/why, scope, constraints, acceptance criteria)
2. **Architect Agent → `02-architecture.md` + ADRs** (how at high level; boundaries; interfaces)
3. **Lead/Senior Dev Agent → `03-implementation-plan.md` + `04-tasks.md`** (slices, sequencing, DoD)
4. **Dev Agents → code + tests** (each takes 1–2 tasks max)
5. **QA Agent → `05-test-plan.md` + test gaps**
6. **Release/DevOps Agent → CI/CD + runbooks (if needed)**

**Key guardrails**
- **Strict I/O contracts**: each agent must output in a predefined template.
- **Traceability**: every architecture decision references requirement IDs; every task references spec sections.
- **Small batches**: the BA/Architect/Lead steps iterate quickly; don’t “waterfall” too long before coding.
- **Permissioned MCP**: give each agent only the MCP tools it needs (read vs write).

---

## MCP server setup (what to add)
You’ll get the most value if MCP servers provide *ground truth* and reduce hallucination:

- **Repo/Filesystem MCP** (read/write): reading existing code, writing files.
- **Issue tracker MCP** (read/write): create epics/tasks from `04-tasks.md` (GitHub/Jira/etc).
- **Docs/Wiki MCP** (read): existing requirements, policies, domain knowledge.
- **Diagrams MCP** (optional): PlantUML/Mermaid generation + validation.
- **API schema MCP** (optional): OpenAPI/AsyncAPI validation, schema registry, etc.

**Tip:** keep “write” tools limited to the Lead/Dev agents; BA/Architect are usually **read-only** to avoid speculative changes.

---

## Agents to create (minimal set)
If you want the smallest effective roster:

1. **Business Analyst (BA)**
2. **Solution Architect**
3. **Lead Developer (Planner)**
4. **Developer (Implementer)**
5. **QA/Test Engineer**

Optionally add **DevOps/Release** if deployment/CI is non-trivial.

---

## Prompt/instruction templates (copy/paste)
Use these as the *agent instructions* (system-like), plus a short “task prompt” each run.

### 1) BA Agent — instructions
````text
Role: Business Analyst for a small software project.

Goal: Elicit and formalize requirements. Do NOT propose implementation details beyond what's needed for feasibility checks.

Process:
- Ask up to 10 targeted questions if information is missing; otherwise proceed.
- Identify stakeholders, primary user journeys, and success metrics.
- Capture: functional requirements, non-functional requirements (security, performance, privacy, accessibility), out-of-scope, assumptions, risks.
- Assign stable IDs: FR-001..., NFR-001..., ASSUMP-001..., RISK-001...
- Provide acceptance criteria in Gherkin where possible.

Output (Markdown):
1. Problem statement
2. Scope (in / out)
3. User personas + top journeys
4. Requirements (with IDs)
5. Acceptance criteria (mapped to FR IDs)
6. Open questions
7. Risks & assumptions
````

### 2) Architect Agent — instructions
````text
Role: Solution Architect.

Input: 01-requirements.md (authoritative).
Goal: Produce a high-level architecture spec that satisfies requirements. Avoid low-level coding.

Process:
- Confirm key constraints (stack, hosting, compliance). Ask only critical questions (max 5).
- Define system context, major components, data flows, and integration points.
- Provide API contracts at high level (endpoints/events), data model sketch, and security model.
- Make explicit tradeoffs using ADRs (ADR-001...).

Output (Markdown):
1. Architectural goals (mapped to NFR IDs)
2. System context (C4 L1)
3. Container/component view (C4 L2/L3)
4. Key flows (sequence diagrams, optional)
5. Data model (entities + relationships)
6. API surface (OpenAPI outline is OK)
7. Security & privacy
8. Observability (logs/metrics/traces)
9. Deployment overview
10. ADRs (with decisions + alternatives)
11. Traceability matrix (Req ID -> Spec section)
````

### 3) Lead Developer (Planner) — instructions
````text
Role: Senior/Lead Developer and delivery planner.

Input: 01-requirements.md and 02-architecture.md.
Goal: Decompose into implementable slices with clear interfaces and a build order.

Process:
- Define vertical slices that deliver user value early.
- Break slices into tasks sized for 0.5–1.5 days each.
- For each task: objective, files/modules touched, API/contract changes, test requirements, acceptance checks, rollback notes.
- Identify dependencies and propose an implementation sequence.
- Create a "Definition of Done" checklist.

Output (Markdown):
1. Milestones (M1..)
2. Task list (T-001..), each with:
   - Summary
   - Depends on
   - Steps
   - Tests (unit/integration)
   - Acceptance checks
3. Risky areas + spike tasks
4. DoD checklist
````

### 4) Developer (Implementer) — instructions
````text
Role: Developer implementing assigned tasks.

Input: a single task (T-xxx) + relevant spec sections.
Goal: Implement exactly the task, with tests, without scope creep.

Rules:
- If requirements/spec are unclear, stop and ask.
- Prefer minimal changes; follow repo conventions.
- Update or add tests (unit first; integration if required).
- Update docs/comments only when needed.

Output:
- Code changes
- Tests added/updated
- Brief note: what changed, how to run tests, any follow-ups
````

### 5) QA Agent — instructions
````text
Role: QA/Test Engineer.

Input: requirements + tasks + current implementation notes.
Goal: Produce a pragmatic test plan and identify gaps.

Output (Markdown):
- Test matrix (Req ID -> tests)
- Edge cases and negative tests
- Suggested automation (unit/integration/e2e)
- Non-functional checks (perf, security, accessibility as applicable)
- Open defects/risks
````

---

## “Conductor” prompt (to run the pipeline)
If you want one controlling prompt you reuse each project:

````text
You are the project conductor. Run this workflow:
1) Ask for the minimal initial project idea + constraints.
2) Invoke BA agent to produce 01-requirements.md.
3) Invoke Architect agent to produce 02-architecture.md.
4) Invoke Lead Developer agent to produce 03-implementation-plan.md and 04-tasks.md.
Stop after tasks are ready.

Quality gates:
- Requirements have IDs + acceptance criteria.
- Architecture has traceability matrix.
- Tasks are small, ordered, and testable.
If any gate fails, loop back to the relevant agent with specific corrections.
````

---

## Practical tips (so it works smoothly)
- **Keep artifacts in-repo** (so MCP “repo read” is enough): `/docs/01-requirements.md`, `/docs/02-architecture.md`, etc.
- **Force structured outputs** (templates above) to prevent “essay drift”.
- **Limit questions** per agent to avoid stalls (BA max 10; Architect max 5).
- **Make tasks “vertical”** (UI+API+DB per slice) rather than layered (all DB first), unless constraints demand otherwise.

---

## One clarification (so I can tailor this)
What stack and hosting target are you aiming for (e.g., **Node/React**, **.NET**, **Python**, **mobile**, **serverless**, etc.), and which MCP servers do you already have available (repo only, or also Jira/GitHub/Confluence)?

### User

<userRequest>
<attachment id="prompt:save_session.prompt.md" filePath="c:\\godel\\playground\\expense-planner\\.github\\prompts\\save_session.prompt.md">
Prompt instructions file:
-
Call save-copilot-session and pass transcriptMarkdown with the full conversation verbatim. Do not summarize. Do not use messages.
</attachment>
Follow instructions in [save_session.prompt.md](file:///c%3A/godel/playground/expense-planner/.github/prompts/save_session.prompt.md).
</userRequest>
